var app=angular.module("ecotoneApp",["ngRoute","ngMaterial","ngMessages"]);app.config(["$mdThemingProvider","$routeProvider","$locationProvider","$httpProvider",function(e,t,o,n){o.html5Mode(!0),e.theme("default").primaryPalette("green").accentPalette("blue").warnPalette("orange"),t.when("/",{templateUrl:"/views/calculator.html",controller:"calculateCtrl"}).when("/login",{templateUrl:"/views/login.html",controller:""}).when("/register",{templateUrl:"/views/register.html",controller:"createAccountCtrl"}).when("/account",{templateUrl:"/views/account.html",controller:""}).when("/dashboard",{templateUrl:"/views/dashboard.html",controller:"projectsCtrl"}).when("/projects",{templateUrl:"/views/project.html",controller:"projectsCtrl"}).when("/about",{templateUrl:"/views/about.html"}).when("/contact",{templateUrl:"/views/contact.html",controller:""}).when("/privacy",{templateUrl:"/views/privacy.html"}).otherwise({redirectTo:"/"})}]),app.controller("calculateCtrl",["$timeout","$q","$log","$scope","$http",function(e,t,o,n,r){function a(e){alert("Sorry! You'll need to create a Constituion for "+e+" first!")}function i(o){var n,r=o?h.states.filter(u(o)):h.states;return h.simulateQuery?(n=t.defer(),e(function(){n.resolve(r)},1e3*Math.random(),!1),n.promise):r}function l(e){o.info("Text changed to "+e)}function s(e){o.info("Item changed to "+JSON.stringify(e))}function c(){var e="Alabama, Alaska, Arizona, Arkansas, California, Colorado, Connecticut, Delaware,            Florida, Georgia, Hawaii, Idaho, Illinois, Indiana, Iowa, Kansas, Kentucky, Louisiana,            Maine, Maryland, Massachusetts, Michigan, Minnesota, Mississippi, Missouri, Montana,            Nebraska, Nevada, New Hampshire, New Jersey, New Mexico, New York, North Carolina,            North Dakota, Ohio, Oklahoma, Oregon, Pennsylvania, Rhode Island, South Carolina,            South Dakota, Tennessee, Texas, Utah, Vermont, Virginia, Washington, West Virginia,            Wisconsin, Wyoming";return e.split(/, +/g).map(function(e){return{value:e.toLowerCase(),display:e}})}function u(e){var t=angular.lowercase(e);return function(e){return 0===e.value.indexOf(t)}}var h=this;h.simulateQuery=!1,h.isDisabled=!1,h.states=c(),h.querySearch=i,h.selectedItemChange=s,h.searchTextChange=l,h.newState=a}]),app.controller("loginCtrl",["$scope","$http","authService",function(e,t,o){e.login=function(){t({method:"POST",url:"/login",data:e.user}).then(function(e){o.saveToken(e.data.token)})}}]),app.controller("createAccountCtrl",["$scope","$http",function(e,t){e.user={},e.processForm=function(o){console.log("Posting..."),t({method:"POST",url:"/register",data:e.user,dataType:"json"}).then(function(e){console.log(e),alert("Your account has been created.")})}}]),app.controller("projectsCtrl",["$scope","$http",function(e,t){t({method:"POST",url:"http://www.w3schools.com/angular/customers.php"}).then(function(t){e.names=t.records})}]),app.service("authService",["$window",function(e){this.parseJwt=function(t){if(t){var o=t.split(".")[1],n=o.replace("-","+").replace("_","/");return JSON.parse(e.atob(n))}return{}},this.saveToken=function(t){e.localStorage.jwtToken=t,console.log("Saved token:",e.localStorage.jwtToken)},this.getToken=function(){return e.localStorage.jwtToken},this.isAuthed=function(){var e=this.getToken();if(e){var t=this.parseJwt(e),o=Math.round((new Date).getTime()/1e3)<=t.exp;return o||this.logout(),o}return!1},this.logout=function(){delete e.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.factory("authInterceptor",["$q","$location","authService",function(e,t,o){return{request:function(e){return e.headers=e.headers||{},o.isAuthed()&&(e.headers.Authorization="Bearer "+o.getToken()),e},response:function(o){return 401===o.status&&t.path("/login"),o||e.when(o)},responseError:function(o){return 401===o.status?t.path("/login"):console.log(o),e.reject(o)}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvYXBwLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsImh0bWw1TW9kZSIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2FyblBhbGV0dGUiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsIiR0aW1lb3V0IiwiJHEiLCIkbG9nIiwiJHNjb3BlIiwiJGh0dHAiLCJuZXdTdGF0ZSIsInN0YXRlIiwiYWxlcnQiLCJxdWVyeVNlYXJjaCIsInF1ZXJ5IiwiZGVmZXJyZWQiLCJyZXN1bHRzIiwic2VsZiIsInN0YXRlcyIsImZpbHRlciIsImNyZWF0ZUZpbHRlckZvciIsInNpbXVsYXRlUXVlcnkiLCJkZWZlciIsInJlc29sdmUiLCJNYXRoIiwicmFuZG9tIiwicHJvbWlzZSIsInNlYXJjaFRleHRDaGFuZ2UiLCJ0ZXh0IiwiaW5mbyIsInNlbGVjdGVkSXRlbUNoYW5nZSIsIml0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwibG9hZEFsbCIsImFsbFN0YXRlcyIsInNwbGl0IiwibWFwIiwidmFsdWUiLCJ0b0xvd2VyQ2FzZSIsImRpc3BsYXkiLCJsb3dlcmNhc2VRdWVyeSIsImxvd2VyY2FzZSIsImluZGV4T2YiLCJ0aGlzIiwiaXNEaXNhYmxlZCIsImF1dGhTZXJ2aWNlIiwibG9naW4iLCJtZXRob2QiLCJ1cmwiLCJkYXRhIiwidXNlciIsInRoZW4iLCJyZXNwb25zZSIsInNhdmVUb2tlbiIsInRva2VuIiwicHJvY2Vzc0Zvcm0iLCJjb25zb2xlIiwibG9nIiwiZGF0YVR5cGUiLCJuYW1lcyIsInJlY29yZHMiLCJzZXJ2aWNlIiwiJHdpbmRvdyIsInBhcnNlSnd0IiwiYmFzZTY0VXJsIiwiYmFzZTY0IiwicmVwbGFjZSIsInBhcnNlIiwiYXRvYiIsImxvY2FsU3RvcmFnZSIsImp3dFRva2VuIiwiZ2V0VG9rZW4iLCJpc0F1dGhlZCIsInBhcmFtcyIsIm5vdEV4cGlyZWQiLCJyb3VuZCIsIkRhdGUiLCJnZXRUaW1lIiwiZXhwIiwibG9nb3V0IiwiZ2V0VXNlciIsImZhY3RvcnkiLCIkbG9jYXRpb24iLCJyZXF1ZXN0IiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJzdGF0dXMiLCJwYXRoIiwicmVzcG9uc2VFcnJvciIsInJlamVjdCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsS0FBTUMsUUFBUUMsT0FBTyxjQUFlLFVBQVcsYUFBYyxjQUVqRUYsS0FBSUcsUUFBUSxxQkFBc0IsaUJBQWtCLG9CQUFxQixnQkFBaUIsU0FBU0MsRUFBb0JDLEVBQWdCQyxFQUFtQkMsR0FDdEpELEVBQWtCRSxXQUFVLEdBRzVCSixFQUFtQkssTUFBTSxXQUNwQkMsZUFBZSxTQUNmQyxjQUFjLFFBQ2RDLFlBQWEsVUFHbEJQLEVBQWVRLEtBQUssS0FFWkMsWUFBYSx5QkFDYkMsV0FBWSxrQkFDYkYsS0FBSyxVQUVKQyxZQUFhLG9CQUNiQyxXQUFZLEtBQ2JGLEtBQUssYUFFSkMsWUFBYSx1QkFDYkMsV0FBWSxzQkFDYkYsS0FBSyxZQUVKQyxZQUFhLHNCQUNiQyxXQUFZLEtBQ2JGLEtBQUssY0FFSkMsWUFBYSx3QkFDYkMsV0FBWSxpQkFDYkYsS0FBSyxhQUVKQyxZQUFhLHNCQUNiQyxXQUFZLGlCQUNiRixLQUFLLFVBRUpDLFlBQWEsc0JBQ2RELEtBQUssWUFFSkMsWUFBYSxzQkFDYkMsV0FBWSxLQUNiRixLQUFLLFlBRUpDLFlBQWEsd0JBQ2RFLFdBQ0NDLFdBQVksU0FXeEJqQixJQUFJZSxXQUFXLGlCQUFrQixXQUFZLEtBQU0sT0FBUSxTQUFVLFFBQVMsU0FBU0csRUFBVUMsRUFBSUMsRUFBTUMsRUFBUUMsR0FjakgsUUFBU0MsR0FBU0MsR0FDaEJDLE1BQU0sa0RBQW9ERCxFQUFRLFdBYXBFLFFBQVNFLEdB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LGdCQUlsQ3JGLElBQUkrRixRQUFRLG1CQUFvQixLQUFNLFlBQWEsY0FBZSxTQUFVNUUsRUFBSTZFLEVBQVdyQyxHQUN2RixPQUNJc0MsUUFBUyxTQUFVOUYsR0FLZixNQUpBQSxHQUFPK0YsUUFBVS9GLEVBQU8rRixZQUNwQnZDLEVBQVkyQixhQUNabkYsRUFBTytGLFFBQVFDLGNBQWdCLFVBQVl4QyxFQUFZMEIsWUFFcERsRixHQUVYK0QsU0FBVSxTQUFVQSxHQU9oQixNQUx3QixPQUFwQkEsRUFBU2tDLFFBR1RKLEVBQVVLLEtBQUssVUFFWm5DLEdBQVkvQyxFQUFHTixLQUFLcUQsSUFDNUJvQyxjQUFlLFNBQVVwQyxHQU94QixNQU53QixPQUFwQkEsRUFBU2tDLE9BQ1RKLEVBQVVLLEtBQUssVUFHZi9CLFFBQVFDLElBQUlMLEdBRVQvQyxFQUFHb0YsT0FBT3JDIiwiZmlsZSI6InNjcmlwdHMvYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdlY290b25lQXBwJywgWyduZ1JvdXRlJywgJ25nTWF0ZXJpYWwnLCAnbmdNZXNzYWdlcyddKTtcblxuYXBwLmNvbmZpZyhbJyRtZFRoZW1pbmdQcm92aWRlcicsICckcm91dGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsICckaHR0cFByb3ZpZGVyJywgZnVuY3Rpb24oJG1kVGhlbWluZ1Byb3ZpZGVyLCAkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIsICRodHRwUHJvdmlkZXIpe1xuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblxuICAgIC8vc2V0IHRoZW1lIGFuZCBjb2xvciBwYWxldHRlXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JylcbiAgICAgICAgLnByaW1hcnlQYWxldHRlKCdncmVlbicpXG4gICAgICAgIC5hY2NlbnRQYWxldHRlKCdibHVlJylcbiAgICAgICAgLndhcm5QYWxldHRlICgnb3JhbmdlJyk7XG5cbiAgICAvL3JvdXRlcyBmb3Igdmlld3NcbiAgICAkcm91dGVQcm92aWRlci53aGVuKCcvJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvY2FsY3VsYXRvci5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdjYWxjdWxhdGVDdHJsJ1xuICAgICAgICB9KS53aGVuKCcvbG9naW4nLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9sb2dpbi5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICcnXG4gICAgICAgIH0pLndoZW4oJy9yZWdpc3RlcicsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3JlZ2lzdGVyLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2NyZWF0ZUFjY291bnRDdHJsJ1xuICAgICAgICB9KS53aGVuKCcvYWNjb3VudCcsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2FjY291bnQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnJ1xuICAgICAgICB9KS53aGVuKCcvZGFzaGJvYXJkJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvZGFzaGJvYXJkLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3Byb2plY3RzQ3RybCdcbiAgICAgICAgfSkud2hlbignL3Byb2plY3RzJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvcHJvamVjdC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdwcm9qZWN0c0N0cmwnXG4gICAgICAgIH0pLndoZW4oJy9hYm91dCcsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2Fib3V0Lmh0bWwnXG4gICAgICAgIH0pLndoZW4oJy9jb250YWN0JyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvY29udGFjdC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICcnXG4gICAgICAgIH0pLndoZW4oJy9wcml2YWN5JyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvcHJpdmFjeS5odG1sJ1xuICAgICAgICB9KS5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgICAgIH0pO1xuXG4gICAgLy8kaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdhdXRoSW50ZXJjZXB0b3InKTtcbn1dKTtcblxuXG4vKipcbiogICBDQUxDVUxBVE9SXG4qKi9cblxuYXBwLmNvbnRyb2xsZXIoJ2NhbGN1bGF0ZUN0cmwnLCBbJyR0aW1lb3V0JywgJyRxJywgJyRsb2cnLCAnJHNjb3BlJywgJyRodHRwJywgZnVuY3Rpb24oJHRpbWVvdXQsICRxLCAkbG9nLCAkc2NvcGUsICRodHRwKSB7XG4gIHZhciBzZWxmID0gdGhpcztcblxuICBzZWxmLnNpbXVsYXRlUXVlcnkgPSBmYWxzZTtcbiAgc2VsZi5pc0Rpc2FibGVkICAgID0gZmFsc2U7XG5cbiAgLy8gbGlzdCBvZiBgc3RhdGVgIHZhbHVlL2Rpc3BsYXkgb2JqZWN0c1xuICBzZWxmLnN0YXRlcyAgICAgICAgPSBsb2FkQWxsKCk7XG4gIHNlbGYucXVlcnlTZWFyY2ggICA9IHF1ZXJ5U2VhcmNoO1xuICBzZWxmLnNlbGVjdGVkSXRlbUNoYW5nZSA9IHNlbGVjdGVkSXRlbUNoYW5nZTtcbiAgc2VsZi5zZWFyY2hUZXh0Q2hhbmdlICAgPSBzZWFyY2hUZXh0Q2hhbmdlO1xuXG4gIHNlbGYubmV3U3RhdGUgPSBuZXdTdGF0ZTtcblxuICBmdW5jdGlvbiBuZXdTdGF0ZShzdGF0ZSkge1xuICAgIGFsZXJ0KFwiU29ycnkhIFlvdSdsbCBuZWVkIHRvIGNyZWF0ZSBhIENvbnN0aXR1aW9uIGZvciBcIiArIHN0YXRlICsgXCIgZmlyc3QhXCIpO1xuICB9XG5cblxuXG4gIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAvLyBJbnRlcm5hbCBtZXRob2RzXG4gIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4gIC8qKlxuICAgKiBTZWFyY2ggZm9yIHN0YXRlcy4uLiB1c2UgJHRpbWVvdXQgdG8gc2ltdWxhdGVcbiAgICogcmVtb3RlIGRhdGFzZXJ2aWNlIGNhbGwuXG4gICAqL1xuICBmdW5jdGlvbiBxdWVyeVNlYXJjaCAocXVlcnkpIHtcbiAgICB2YXIgcmVzdWx0cyA9IHF1ZXJ5ID8gc2VsZi5zdGF0ZXMuZmlsdGVyKCAgICAgY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSApIDogc2VsZi5zdGF0ZXMsXG4gICAgICAgIGRlZmVycmVkO1xuICAgIGlmIChzZWxmLnNpbXVsYXRlUXVlcnkpIHtcbiAgICAgIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHsgZGVmZXJyZWQucmVzb2x2ZSggcmVzdWx0cyApOyB9LCBNYXRoLnJhbmRvbSgpICogMTAwMCwgZmFsc2UpO1xuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNlYXJjaFRleHRDaGFuZ2UodGV4dCkge1xuICAgICRsb2cuaW5mbygnVGV4dCBjaGFuZ2VkIHRvICcgKyB0ZXh0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlbGVjdGVkSXRlbUNoYW5nZShpdGVtKSB7XG4gICAgJGxvZy5pbmZvKCdJdGVtIGNoYW5nZWQgdG8gJyArIEpTT04uc3RyaW5naWZ5KGl0ZW0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBgc3RhdGVzYCBsaXN0IG9mIGtleS92YWx1ZSBwYWlyc1xuICAgKi9cbiAgZnVuY3Rpb24gbG9hZEFsbCgpIHtcbiAgICB2YXIgYWxsU3RhdGVzID0gJ0FsYWJhbWEsIEFsYXNrYSwgQXJpem9uYSwgQXJrYW5zYXMsIENhbGlmb3JuaWEsIENvbG9yYWRvLCBDb25uZWN0aWN1dCwgRGVsYXdhcmUsXFxcbiAgICAgICAgICAgIEZsb3JpZGEsIEdlb3JnaWEsIEhhd2FpaSwgSWRhaG8sIElsbGlub2lzLCBJbmRpYW5hLCBJb3dhLCBLYW5zYXMsIEtlbnR1Y2t5LCBMb3Vpc2lhbmEsXFxcbiAgICAgICAgICAgIE1haW5lLCBNYXJ5bGFuZCwgTWFzc2FjaHVzZXR0cywgTWljaGlnYW4sIE1pbm5lc290YSwgTWlzc2lzc2lwcGksIE1pc3NvdXJpLCBNb250YW5hLFxcXG4gICAgICAgICAgICBOZWJyYXNrYSwgTmV2YWRhLCBOZXcgSGFtcHNoaXJlLCBOZXcgSmVyc2V5LCBOZXcgTWV4aWNvLCBOZXcgWW9yaywgTm9ydGggQ2Fyb2xpbmEsXFxcbiAgICAgICAgICAgIE5vcnRoIERha290YSwgT2hpbywgT2tsYWhvbWEsIE9yZWdvbiwgUGVubnN5bHZhbmlhLCBSaG9kZSBJc2xhbmQsIFNvdXRoIENhcm9saW5hLFxcXG4gICAgICAgICAgICBTb3V0aCBEYWtvdGEsIFRlbm5lc3NlZSwgVGV4YXMsIFV0YWgsIFZlcm1vbnQsIFZpcmdpbmlhLCBXYXNoaW5ndG9uLCBXZXN0IFZpcmdpbmlhLFxcXG4gICAgICAgICAgICBXaXNjb25zaW4sIFd5b21pbmcnO1xuXG4gICAgcmV0dXJuIGFsbFN0YXRlcy5zcGxpdCgvLCArL2cpLm1hcCggZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogc3RhdGUudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgZGlzcGxheTogc3RhdGVcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGZpbHRlciBmdW5jdGlvbiBmb3IgYSBxdWVyeSBzdHJpbmdcbiAgICovXG4gIGZ1bmN0aW9uIGNyZWF0ZUZpbHRlckZvcihxdWVyeSkge1xuICAgIHZhciBsb3dlcmNhc2VRdWVyeSA9IGFuZ3VsYXIubG93ZXJjYXNlKHF1ZXJ5KTtcblxuICAgIHJldHVybiBmdW5jdGlvbiBmaWx0ZXJGbihzdGF0ZSkge1xuICAgICAgcmV0dXJuIChzdGF0ZS52YWx1ZS5pbmRleE9mKGxvd2VyY2FzZVF1ZXJ5KSA9PT0gMCk7XG4gICAgfTtcblxuICB9XG59XSk7XG5cblxuLy8gTG9naW4gSFRNTCAtIEthdGVcbmFwcC5jb250cm9sbGVyKCdsb2dpbkN0cmwnLCBbJyRzY29wZScsICckaHR0cCcsICdhdXRoU2VydmljZScsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIGF1dGhTZXJ2aWNlKSB7XG4gICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgICAgICBkYXRhOiAkc2NvcGUudXNlclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgIGF1dGhTZXJ2aWNlLnNhdmVUb2tlbihyZXNwb25zZS5kYXRhLnRva2VuKTtcbiAgICAgICAgfSlcbiAgICB9XG59XSk7XG5cbi8vIFJlZ2lzdGVyIEhUTUwgLSBNYWRlbGluZVxuYXBwLmNvbnRyb2xsZXIoJ2NyZWF0ZUFjY291bnRDdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwKSB7XG4gICAgJHNjb3BlLnVzZXIgPSB7fTtcblxuICAgICRzY29wZS5wcm9jZXNzRm9ybSA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUG9zdGluZy4uLlwiKTtcbiAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6ICcvcmVnaXN0ZXInLFxuICAgICAgICAgICAgZGF0YTogJHNjb3BlLnVzZXIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICBhbGVydChcIllvdXIgYWNjb3VudCBoYXMgYmVlbiBjcmVhdGVkLlwiKVxuICAgICAgICB9KVxuICAgIH07XG59XSk7XG5cbi8vIFByb2plY3QgSFRNTCAtIERhc2hib2FyZCBIVE1MIC0gS2ltXG5hcHAuY29udHJvbGxlcigncHJvamVjdHNDdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwKSB7XG4gICAgJGh0dHAoe1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgdXJsOiAnaHR0cDovL3d3dy53M3NjaG9vbHMuY29tL2FuZ3VsYXIvY3VzdG9tZXJzLnBocCdcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAkc2NvcGUubmFtZXMgPSByZXNwb25zZS5yZWNvcmRzO1xuICAgIH0pO1xuXG5cbn1dKTtcblxuLy8gU2VydmljZXMgZm9yIGF1dGhlbnRpY2F0aW9uXG5hcHAuc2VydmljZSgnYXV0aFNlcnZpY2UnLCBbJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHdpbmRvdyl7XG4gICAgdGhpcy5wYXJzZUp3dCA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBiYXNlNjRVcmwgPSB0b2tlbi5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGJhc2U2NFVybC5yZXBsYWNlKCctJywgJysnKS5yZXBsYWNlKCdfJywgJy8nKTtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKCR3aW5kb3cuYXRvYihiYXNlNjQpKTtcbiAgICAgICAgfSBlbHNlIHJldHVybiB7fTtcbiAgICB9O1xuXG4gICAgdGhpcy5zYXZlVG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW4gPSB0b2tlbjtcbiAgICAgICAgY29uc29sZS5sb2coJ1NhdmVkIHRva2VuOicsJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW4pO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFRva2VuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW47XG4gICAgfTtcblxuICAgIHRoaXMuaXNBdXRoZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0b2tlbiA9IHRoaXMuZ2V0VG9rZW4oKTtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5wYXJzZUp3dCh0b2tlbik7XG4gICAgICAgICAgICB2YXIgbm90RXhwaXJlZCA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKSA8PSBwYXJhbXMuZXhwO1xuICAgICAgICAgICAgaWYgKCFub3RFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dvdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBub3RFeHBpcmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkZWxldGUgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW47XG4gICAgfTtcblxuICAgIC8vIGV4cG9zZSB1c2VyIGFzIGFuIG9iamVjdFxuICAgIHRoaXMuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VKd3QodGhpcy5nZXRUb2tlbigpKVxuICAgIH07XG59XSk7XG5cbmFwcC5mYWN0b3J5KCdhdXRoSW50ZXJjZXB0b3InLCBbJyRxJywgJyRsb2NhdGlvbicsICdhdXRoU2VydmljZScsIGZ1bmN0aW9uICgkcSwgJGxvY2F0aW9uLCBhdXRoU2VydmljZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG4gICAgICAgICAgICBpZiAoYXV0aFNlcnZpY2UuaXNBdXRoZWQoKSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyBhdXRoU2VydmljZS5nZXRUb2tlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2U6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcblxuICAgICAgICAgICAgICAgIC8vIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZFxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8ICRxLndoZW4ocmVzcG9uc2UpO1xuICAgICAgICB9LCByZXNwb25zZUVycm9yOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
